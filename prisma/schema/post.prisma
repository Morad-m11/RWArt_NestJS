model Post {
    id          Int      @id @default(autoincrement())
    authorId    Int
    title       String
    description String?
    imageId     String
    createdAt   DateTime @default(now())

    tags     Tag[]
    upvotes  Upvote[]
    featured FeaturedPost[]

    author User @relation(fields: [authorId], references: [id], onDelete: Cascade)

    @@index([createdAt])
}

model FeaturedPost {
    id         Int      @id @default(autoincrement())
    postId     Int
    featuredAt DateTime @default(now())

    post Post @relation(fields: [postId], references: [id])

    @@unique([postId, featuredAt])
    @@index([featuredAt])
}

model Tag {
    id       Int    @id @default(autoincrement())
    name     String @unique
    category String
    posts    Post[]
}

model Upvote {
    id        Int      @id @default(autoincrement())
    userId    Int
    postId    Int
    createdAt DateTime @default(now())

    user User @relation(fields: [userId], references: [id], onDelete: Cascade)
    post Post @relation(fields: [postId], references: [id], onDelete: Cascade)

    @@unique([userId, postId])
}
